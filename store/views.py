from django.shortcuts import render, get_object_or_404  
# render ‚Äî —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è HTML-—à–∞–±–ª–æ–Ω–æ–≤
# get_object_or_404 ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∏–∑ –±–∞–∑—ã –∏–ª–∏ –æ—à–∏–±–∫—É 404, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

from .models import Product  
# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥–µ–ª—å Product, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–∞—Ö –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö


# üè† –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞
def index(request):
    # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    products = Product.objects.all()

    # –ü–µ—Ä–µ–¥–∞—ë–º —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ —à–∞–±–ª–æ–Ω 'store/index.html'
    # –í —à–∞–±–ª–æ–Ω–µ –º—ã —Å–º–æ–∂–µ–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –Ω–∏–º —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é 'products'
    return render(request, 'store/index.html', {'products': products})


# üõí –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
def product_detail(request, product_id):
    # –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä –ø–æ –µ–≥–æ ID (product_id)
    # –ï—Å–ª–∏ —Ç–æ–≤–∞—Ä–∞ —Å —Ç–∞–∫–∏–º ID –Ω–µ—Ç ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∂–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ 404
    product = get_object_or_404(Product, pk=product_id)

    # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —à–∞–±–ª–æ–Ω 'store/product_detail.html' –∏ –ø–µ—Ä–µ–¥–∞—ë–º —Ç—É–¥–∞ —Ç–æ–≤–∞—Ä
    return render(request, 'store/product_detail.html', {'product': product})

from django.shortcuts import render, get_object_or_404
from .models import Product, Category

def index(request):
    products = Product.objects.all()
    categories = Category.objects.all()
    return render(request, 'store/index.html', {'products': products, 'categories': categories})


def category_products(request, category_id):
    category = get_object_or_404(Category, id=category_id)
    products = category.products.all()
    categories = Category.objects.all()
    return render(request, 'store/category_products.html', {
        'category': category,
        'products': products,
        'categories': categories,
    })

from django.shortcuts import render, get_object_or_404
from .models import Product, Category


def index(request):
    products = Product.objects.all()
    categories = Category.objects.all()
    return render(request, 'store/index.html', {
        'products': products,
        'categories': categories
    })


def category_products(request, category_id):
    category = get_object_or_404(Category, id=category_id)
    products = Product.objects.filter(category=category)
    categories = Category.objects.all()
    return render(request, 'store/category_products.html', {
        'category': category,
        'products': products,
        'categories': categories
    })


def product_detail(request, product_id):
    product = get_object_or_404(Product, pk=product_id)
    categories = Category.objects.all()
    return render(request, 'store/product_detail.html', {
        'product': product,
        'categories': categories
    })



# Create your views here.
# (–≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è Django –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å)
